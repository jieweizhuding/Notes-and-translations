## 离散分配分类
1. 分页式存储
2. 分段式存储
3. 段页式存储

## 分页式存储
#### 基本概念
1. 页面和物理块
分页式存储实际上是将连续式存储中的元件与内存块一一映射改为了元件与内存块1对多的映射，即一个元件可以有多个内存块。而在分页式存储中将内存块叫做物理块。而对应的在逻辑上可以认为是一个元件被分成了多个部分，分别放入不同的物理块中，而这逻辑上元件被分成的部分叫做页。
2. 页表
为了让OS找到进程的位置，会在PCB中放置一个指向对应页表的指针。而页表是完成逻辑页与物理块的对应关系。
3. 地址结构
分页地址中的地质结构为：页号P+位移量W。是一个一维元素。因为我们会提前规定一个页面的大小，则位移量的二进制位数就可以知道了。剩下的前面的部分就是页表中的页号，可以从页表中找到对应的物理块。

#### 地址变换机构
为了实现用户地址空间中的逻辑地址转换为内存空间中的物理地址，在内存中必须设置地址变换机构，实现从逻辑机构向物理机构的转变。

地址变换的基本思路为：
因为数据在逻辑地址与物理地址的偏移量相同。所以W不用变，只需要通过页表完成P的映射即可。
所以无论是逻辑地址向物理地址的转换还是反过来，其过程都是：
1. 通过物理块的大小分割地址的P、W。
2. 通过页表映射P。
由此我们得到地址变换机构：
![!\[text\](https://th.bing.com/th/id/OIP.O7VKKHoYThCCMuTnKg77lwHaEo?rs=1&pid=ImgDetMain)](https://img-blog.csdnimg.cn/20181128201137453.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzMjc3NDA0,size_16,color_FFFFFF,t_70)

由取得一个数据需要的过程我们得知，要获得一个数据必须访问内存2次，第一次是寻找页表，第2次是寻找数据。

因此，我们按照缓存的思路，为地址变换机构加上一个寄存器，使其具有类似cache的功能，就可以先去该cache中查找，如果没有找到，再去寻找页表。该寄存器称为“快表”。

而快表访问数据的时间为：
$$
EAT=a*\lambda+(1-a)(t+\lambda)+t
$$
其中a是在命中率，t是访问内存需要的时间。lambda是访问快表需要的时间。

#### 多级页表
当页表个体的大小大于了物理块的大小，则一个物理块无法放置一个页表，因此，需要将页表认为成一个元件，将其分成不同的块，就会形成多级页表。

注意多表计算中，表的单位是项，而偏移量的单位是byte
![alt text](<图片/截图 2025-06-09 18-16-14.png>)
![alt text](<图片/截图 2025-06-09 18-17-00.png>)

## 分段式存储管理方式
分页式存储随着发展，已经不能满足人们的需要，因此，发展出了分段式存储。
#### 优点
1. 方便编程
2. 信息共享
3. 信息保护
4. 动态增长
5. 动态链接

#### 基本概念
1. 分段与分段地址
与页不同的是，段的大小是不相同的，是由用户决定的，而不是OS分配的，因此适用于编程，是一种逻辑概念的数据分割，而页是物理概念上的数据分割。

因为分段大小不固定，所以需要分段地址必须是二维的，即必须指明段号与段内地址分别是多少，而不能放在一起，让别人去计算来分割。所以段地址与物理地址的转换是十分容易的。
2. 分段与分页的主要区别
    从上面的分析可以看出：
1. 页是信息的物理单位，段是信息的逻辑单位。
2. 页的大小固定且由OS决定，段的长度不固定，取决于用户编写的程序
3. 分页的用户地址空间是一维的，段系统中是二维的。

#### 段表
段表与页表类似，只是每一项要加上段长。

#### 地址变换机构
与页的地址变换机构类似，
![!\[text\](https://th.bing.com/th/id/OIP.3Zt1G-8-6Y6HbBigqyb3IwHaFL?rs=1&pid=ImgDetMain)](https://images2017.cnblogs.com/blog/1037040/201707/1037040-20170728212302930-1476892026.png)

## 段页式存储
即将一个段分页
![alt text](https://pic1.zhimg.com/v2-4d8e46990c9ed4590532f760db3526c8_720w.jpg?source=172ae18b)